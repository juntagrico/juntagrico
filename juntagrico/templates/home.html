{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block messages %}
    {% with member=request.user.member %}
        {% if not member.confirmed %}
            {% include "messages/not_confirmed.html" %}
        {% endif %}
        {% if member.subscription_current is None %}
            {% if member.subscription_future is None %}
                {% include "messages/no_subscription.html" %}
            {% endif %}
        {% elif member.subscription_current.parts.is_trial.exists %}
            {% include "messages/trial_sub.html" with trial_parts=member.subscription_current.parts.is_trial %}
        {% endif %}
        {% if member.share_set.unpaid.exists %}
            {% include "messages/unpaid_shares.html" with amount=member.share_set.unpaid.count %}
        {% endif %}
    {% endwith %}
{% endblock %}

{% block content %}
    {% block jobs %}
        <h3 id="jobs">
            {% trans "Offene Arbeitseinsätze" %}
        </h3>
        <div class="row mb-3">
            <div class="col-md-12">
                {% include "snippets/snippet_jobs.html" %}
            </div>
        </div>
        <div class="row mb-5">
            <div class="col-md-12">
                <a href="{% url 'jobs' %}">
                    {% trans "Hier alle Arbeitseinsätze anzeigen" %}
                </a>
            </div>
        </div>
    {% endblock %}
    {% block areas %}
        <div class="row mb-3">
            <div class="col-md-12">
                <h4 id="areas">
                    {% trans "Zu den Kalendern der einzelnen Tätigkeitsbereichen" %}
                </h4>
            </div>
        </div>
        {% for area in areas %}
            <div class="row mb-1">
                <div class="col-md-12">
                    <a href="{% url 'area' area.id %}" class="{% if area.core %}core{% endif %}">
                        {{ area.name }}
                    </a>
                </div>
            </div>
        {% endfor %}
    {% endblock %}
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{% static 'juntagrico/external/datatables/datatables.min.js' %}">
    </script>
    <script type="text/javascript">
        // Assuming default ids
        $(function(){
            $("#filter-table").DataTable({"searching": false});
        })
        </script>
{% endblock %}
